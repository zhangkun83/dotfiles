#!/bin/bash
if [[ -n "$TMUX" ]]; then
    current_window_id=$(tmux display-message -p '#I')
    tmux rename-window -t $current_window_id "scratch"
    trap "tmux set -wt:$current_window_id automatic-rename on" EXIT
fi
emacs -nw --eval='(progn
      (auto-save-visited-mode)
      (find-file "~/.scratch.txt")
      (split-window-below)
      (other-window 1)
      (find-file "~/.scratch")
      (lisp-interaction-mode)
      (other-window 1)
      (kill-buffer "*scratch*"))'
